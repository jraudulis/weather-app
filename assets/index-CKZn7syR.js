(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();const u="08ff5bfd6bbd0c08f59cd1c0c38d242b",g="so2V6iCiqSgz7kgwSsRCx9r_Xb7S0z04bUZvTV8wIMs",p=document.getElementById("search-form"),d=document.getElementById("search"),w=document.getElementById("location"),E=document.getElementById("temperature"),I=document.getElementById("feel-like"),$=document.getElementById("container"),i=document.querySelector(".weather-info"),c=document.querySelector(".loader"),b=document.getElementById("icon"),k=document.getElementById("weather-description");let l;async function v(){try{if(!l)return;const t=await fetch(`https://api.unsplash.com/search/photos?query=${l}&client_id=${g}`);if(!t.ok){console.error("Unsplash API response not OK",t.status);return}const o=await t.json();if(o.results&&o.results.length>0){const s=o.results[Math.floor(Math.random()*o.results.length)].urls.regular;$.style.backgroundImage=`url(${s})`}}catch(t){console.error("Background update failed:",t)}}async function m(){const t=d.value.trim();if(t)try{i.style.display="none",c.style.display="block";const o=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${t}&appid=${u}`);if(!o.ok)throw new Error(`Geocoding API error: ${o.status}`);const s=await o.json();if(!s||s.length===0){c.style.display="none",L();return}else{const{name:n,lat:e,lon:r}=s[0];await C(e,r,n),f()}}catch(o){alert(`Error: ${o.message}`),c.style.display="none",i.style.display="block"}}async function C(t,o,s){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${o}&appid=${u}&units=metric`);if(!n.ok)throw new Error(`Weather API error: ${n.status}`);const e=await n.json();if(!e.main){alert("Server error");return}l=e.weather[0].description.toLowerCase();const r=Math.round(e.main.temp),a=Math.round(e.main.feels_like),y=e.sys.country,h=e.weather[0].icon;b.src=`https://openweathermap.org/img/wn/${h}@2x.png`,w.textContent=`${s}, ${y}`,k.textContent=l,E.textContent=`${r}ºC`,I.textContent=`Feels like ${a}ºC`,c.style.display="none",i.style.display="block",await v(),d.value=""}catch(n){alert(`Error: ${n.message}`),c.style.display="none",i.style.display="block"}}function f(){const t=p.querySelector("p");t&&t.remove()}function L(){f();const t=document.createElement("p"),o=document.createTextNode("Enter valid location");t.appendChild(o),p.appendChild(t),d.value=""}function P(t){t.key==="Enter"&&(t.preventDefault(),m())}btn.addEventListener("click",m);d.addEventListener("keypress",P);
