(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const h="08ff5bfd6bbd0c08f59cd1c0c38d242b",C="so2V6iCiqSgz7kgwSsRCx9r_Xb7S0z04bUZvTV8wIMs";document.getElementById("search-form");const f=document.getElementById("search"),I=document.getElementById("location"),i=document.getElementById("temperature"),m=document.getElementById("feel-like"),y=document.getElementById("container"),g=document.querySelector(".weather-info"),w=document.querySelector(".loader"),$=document.getElementById("icon"),L=document.getElementById("weather-description");let c,l,u,p=!0;async function k(){try{if(!c)return;const e=await fetch(`https://api.unsplash.com/search/photos?query=${c}&client_id=${C}`);if(!e.ok){console.error("Unsplash API response not OK",e.status);return}const t=await e.json();if(t.results&&t.results.length>0){const n=t.results[Math.floor(Math.random()*t.results.length)].urls.regular;y.style.backgroundImage=`url(${n})`}}catch(e){console.error("Background update failed:",e)}}async function E(){const e=f.value.trim();if(e)try{b();const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&appid=${h}`);if(!t.ok)throw new Error(`Geocoding API error: ${t.status}`);const n=await t.json();if(!n||n.length===0){d(),P();return}else{const{name:s,lat:o,lon:r}=n[0];await v(o,r,s)}}catch(t){alert(`Error: ${t.message}`),d()}}async function v(e,t,n){try{const s=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=${h}&units=metric`);if(!s.ok)throw new Error(`Weather API error: ${s.status}`);const o=await s.json();if(!o.main){alert("Server error");return}c=o.weather[0].description.toLowerCase(),l=Math.round(o.main.temp),u=Math.round(o.main.feels_like);const r=o.sys.country,a=o.weather[0].icon;$.src=`https://openweathermap.org/img/wn/${a}@2x.png`,I.textContent=`${n}, ${r}`,L.textContent=c,i.textContent=`${l}ºC`,m.textContent=`Feels like ${u}ºC`,x(),await k(),d(),f.value=""}catch(s){alert(`Error: ${s.message}`),d()}}function b(){g.style.display="none",w.style.display="block"}function d(){w.style.display="none",g.style.display="block"}function x(){const e=document.querySelector(".weather-info");e.style.opacity="0",e.style.transform="translateY(20px)",e.style.display="block",e.offsetHeight,e.style.transition="opacity 1s ease, transform 1s ease",e.style.opacity="1",e.style.transform="translateY(0)"}function S(){if(p){let e=Math.round(l*9/5+32),t=Math.round(u*9/5+32);i.textContent=`${e}ºF`,m.textContent=`Feels like ${t}ºF`,p=!1}else i.textContent=`${l}ºC`,m.textContent=`Feels like ${u}ºC`,p=!0}function P(){const e=document.querySelector(".toast");e&&e.remove();const t=document.createElement("div");t.className="toast toast-error";const n=document.createTextNode("Enter valid location");t.appendChild(n),y.appendChild(t),setTimeout(()=>t.classList.add("show"),10),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},3e3)}function T(e){e.key==="Enter"&&(e.preventDefault(),E())}btn.addEventListener("click",E);f.addEventListener("keypress",T);i.addEventListener("click",S);
